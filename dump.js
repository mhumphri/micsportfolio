.h1vnkd0i[class][class] {
	position: -webkit-sticky;
	position: sticky;
	/* mic adj - top: 0; */
	width: 100%;
	z-index: 10;
		/* mic adj - height: var(--navigation-bar-offset); */
	height: 80px;
}

.c1yo0219[class][class]::before, .c1yo0219[class][class]::after {
	display: flex;
	content: "";
}

.c1kn6kxw[class][class] {

}

.c1kffd0v[class][class] {
	height: 80px;
	width: 100%;
	z-index: 100;

	position: relative;
}

.dir-ltr.c1kffd0v[class][class] {
	left: 0;
}

.c1kffd0v[class][class]::before {
	content: '';
	height: 140%;
	opacity: 0;
	pointer-events: none;
	position: absolute;
	top: 0;
	width: 100%;
	z-index: 0;
	transition: 150ms opacity ease;
}

.dir.c1kffd0v[class][class]::before {
	background-image: linear-gradient(to bottom,#000,rgba(0,0,0,0));
}

.dir-ltr.c1kffd0v[class][class]::before {
	left: 0;
}

.c1kffd0v[class][class]::after {
	transition: transform 150ms ease,opacity 150ms ease 75ms;
	content: '';
	height: 100%;
	opacity: 1;
	position: absolute;
	top: 0;
	width: 100%;
	z-index: 0;
}

.cxy853f[class][class]::after {
	opacity: 1;
	transition: transform 250ms ease,opacity 250ms ease;
}

.dir.c1kffd0v[class][class]::after {
	/* box-shadow: rgba(0,0,0,0.08) 0 1px 12px; */
	transform-origin: 50% 0%;
}

.dir-ltr.c1kffd0v[class][class]::after {
	left: 0;
}

.dir.c1kffd0v[class][class]::after {
	box-shadow: rgb(0 0 0 / 8%) 0 1px 0;
}

.dir.cxy853f[class][class]::after {
	transform: initial;
}

.cdfwt5b[class][class] {
	justify-content: space-between;
	align-items: center;
	display: flex;
	height: 100%;
	position: relative;
	width: 100%;
	z-index: 1;
}




/* SEARCH BLOCK */

._1bu35ic3 {
	border: 1px solid #DDDDDD !important;
	border-radius: 32px !important;
	color: #222222 !important;
	display: flex !important;
	height: 66px !important;
	position: relative !important;
	width: 100% !important;
	outline: currentcolor none medium !important;
	background-color: #FFFFFF !important;
}

._13rvbe2 {
	display: flex !important;
	flex: 1 1 0% !important;
	height: 100% !important;
	min-width: 0px !important;
	pointer-events: auto !important;
}

._dd55nf9 {
	flex: 1 0 !important;
	min-width: 0px !important;
}

._1rwlbyy {
	-moz-box-align: center !important;
	position: relative !important;
	align-items: center !important;
	display: flex !important;
	flex: 1 0 0% !important;
	margin: -1px !important;
	min-width: 0px !important;
}

._f6t7o5n {
	cursor: pointer !important;
	display: block !important;
	background-clip: padding-box !important;
	border: 1px solid transparent !important;
	border-radius: 32px !important;
	flex: 1 0 0% !important;
	min-width: 0px !important;
	padding: 14px 32px !important;
}

._f6t7o5n::before {
	border-width: 0px 1px 0px 0px !important;
	border-style: solid solid solid none !important;
	border-top-color:  !important;
	border-right-color:  !important;
	border-bottom-color:  !important;
	content: "" !important;
	display: none !important;
	height: 32px !important;
	margin-top: -16px !important;
	position: absolute !important;
	right: 0px !important;
	top: 50% !important;
	z-index: 0 !important;
	border-left: 0px none !important;
}

._f6t7o5n::after {
	background-clip: padding-box !important;
	border: 1px solid transparent !important;
	border-radius: 32px !important;
	inset: 0px !important;
	content: "" !important;
	position: absolute !important;
	z-index: 0 !important;
}

._buo7ycz {
	cursor: pointer !important;
	display: block !important;
	background-clip: padding-box !important;
	border: 1px solid transparent !important;
	border-radius: 32px !important;
	flex: 1 0 0% !important;
	min-width: 0px !important;
	padding: 14px 32px !important;
	z-index: 3 !important;
}

._buo7ycz::before {
	border-width: 0px 1px 0px 0px !important;
	/*
	border-style: solid solid solid none !important;
	*/
	border-top-color:  !important;
	border-right-color:  !important;
	border-bottom-color:  !important;
	content: "" !important;
	height: 32px !important;
	margin-top: -16px !important;
	position: absolute !important;
	right: 0px !important;
	top: 50% !important;
	z-index: 0 !important;
	display: block !important;
	border-left: 0px none !important;
}

._buo7ycz::after {
	background-clip: padding-box !important;
	border-style: solid !important;
	border-width: 1px !important;
	border-image: none 100% / 1 / 0 stretch !important;
	border-radius: 32px !important;
	inset: 0px !important;
	content: "" !important;
	position: absolute !important;
	z-index: 0 !important;

}

._16fjzef {
	position: relative !important;
	z-index: 1 !important;
}

._snpd7k {
	font-size: 12px !important;
	line-height: 16px !important;
	font-weight: 800 !important;
	letter-spacing: 0.04em !important;
	padding-bottom: 2px !important;
}

._1yibeas {
	display: block !important;
	border: 0px none !important;
	margin: 0px !important;
	padding: 0px !important;
	width: 100% !important;
	background: rgba(0, 0, 0, 0) none repeat scroll 0% 0% !important;
	font-size: 14px !important;
	line-height: 18px !important;
	font-weight: 600 !important;
	color: #222222 !important;
	text-overflow: ellipsis !important;
}

._1yibeas:focus {
	outline: currentcolor none medium !important;
}

._1yibeas::placeholder {
	font-size: 14px !important;
	line-height: 18px !important;
	font-weight: 400 !important;
	color: #222222 !important;
	opacity: 0.7 !important;
}

._xhcgu32 {
	left: 0px !important;
	position: absolute !important;
	right: 0px !important;
	top: 100% !important;
	z-index: 4 !important;
	visibility: visible !important;
	opacity: 1 !important;
}

._yu5dnq {
	left: 0px !important;
	position: absolute !important;
	right: 0px !important;
	top: 100% !important;
	z-index: 4 !important;
	visibility: hidden !important;
	opacity: 0 !important;
}

.c1nifi44 {
	position: absolute;
	top: 100%;
	z-index: 1;
	max-height: calc(100vh - 150px);
	overflow-x: hidden;
	overflow-y: auto;
}

.dir.c1nifi44 {
	background: #FFFFFF;
	border-radius: 32px;
	box-shadow: 0 0 0 1px rgba(0,0,0,0.04),0 8px 16px rgba(0,0,0,0.15);
	margin-top: 12px;
	padding: 16px 32px;
}

.dir-ltr.l16t0m55 {
	left: 0;
}

._1tb077f {
	display: flex !important;
	padding: 16px 8px 24px !important;
	margin: 0px -32px -8px !important;
	max-width: 848px !important;
}

.dir.l1mixo1[class][class] {
	margin: 8px 0 16px 0;
}

.dir-ltr.l1mixo1[class][class] {
	padding: 0 28px 0 44px;
}

.svg_search_lg {
	display: block;
	fill: none;
	height: 16px;
	width: 16px;
	stroke: currentcolor;
	stroke-width: 4px;
	overflow: visible;
}

/* search button */

._18zylmz {
	flex: 0 0 auto !important;
	margin-left: -6px !important;
	padding-right: 9px !important;
	position: relative !important;
	z-index: 5 !important;
}

._q1ewc8l {
	appearance: none !important;
	background-position: 0% 0% !important;
	background-repeat: repeat !important;
	background-attachment: scroll !important;
	background-image: none !important;
	background-size: auto !important;
	background-origin: padding-box !important;
	background-clip: border-box !important;
	border: 0px none !important;
	color: #FFFFFF !important;
	cursor: pointer !important;
	display: inline-block !important;
	font-family: inherit !important;
	line-height: 16px !important;
	margin: 0px !important;
	outline: currentcolor none medium !important;
	overflow: hidden !important;
	padding: 0px !important;
	text-align: inherit !important;
	text-decoration: none !important;
	user-select: auto !important;
	border-radius: 24px !important;
	height: 48px !important;
	max-width: 48px !important;
	position: relative !important;
	vertical-align: middle !important;
	z-index: 0 !important;
}

._q1ewc8l {
	background-color: #FF385C !important;
}

._q1ewc8l::before {
	background: #FF385C !important;
	inset: 0px !important;
	content: "" !important;
	position: absolute !important;
	will-change: opacity !important;
	z-index: 0 !important;
	opacity: 0 !important;
}

._q1ewc8l::-moz-focus-inner {
	border: medium none !important;
	padding: 0px !important;
	margin: 0px !important;
}

._186q534 {
	display: inline-flex !important;
	padding: 16px !important;
	position: relative !important;
	z-index: 1 !important;
}

/* search results container - large */

.k3s7ijn[class][class] {
	display: flex;
	min-width: 312px;
	box-sizing: border-box;
}

.dir.k3s7ijn[class][class] {
	padding: 16px 8px 24px;
	margin: 0 -32px -8px;
}

._uzocf2 {
	cursor: pointer !important;
	list-style-type: none !important;
	width: 100% !important;
	display: flex !important;
	padding: 8px 32px 8px 24px !important;
}

._uzocf2 {
	cursor: pointer !important;
	list-style-type: none !important;
	width: 100% !important;
	display: flex !important;
	padding: 8px 24px 8px 24px !important;
	box-sizing: border-box;
}

._uzocf2:hover {
background-color: #f7f7f7;
border-color: #f7f7f7;
}

._1825a1k {
	-moz-box-pack: center !important;
	-moz-box-direction: normal !important;
	-moz-box-orient: vertical !important;
	width: 100% !important;
	display: flex !important;
	flex-direction: column !important;
	justify-content: center !important;
}

._r1t6ga {
	font-size: 16px !important;
	line-height: 20px !important;
	font-weight: 500 !important;
	color: rgb(34, 34, 34) !important;
	overflow: hidden !important;
	text-overflow: ellipsis !important;
	display: -webkit-box !important;
	-webkit-line-clamp: 6 !important;
	-moz-box-orient: vertical !important;
}

._r1t6ga {
	overflow: clip !important;
}





@media (min-width: 950px) {
._dd55nf9 {
	flex: 1.5 0 !important;
}

.kyy9mvs[class][class] {
width: 100%;
}
}



import React, { useState, useEffect, useRef } from "react";
import crossButton from "./crossButton";
import countryPolygons from "../data/countryPolygons.json";
import "../css/searchMapNav.css";

//

function SearchMapNav(props) {

  const [activeSearch, setActiveSearch] = React.useState();
  const [fullCountryArray, setFullCountryArray] = React.useState([]);

    const [countryInput, setCountryInput] = React.useState("");
    const [countryInputStored, setCountryInputStored] = React.useState("");

const searchbarRef = useRef(null);

  useEffect(() => {
    const featuresArray = countryPolygons.features
    let countryArray = []
    for (let i=0; i<featuresArray.length; i++) {
      countryArray.push(featuresArray[i].properties.NAME)
    }
    countryArray.sort()
    setFullCountryArray(countryArray)
  }, []);

  useEffect(() => {

    const handleClickOutside = (event) => {
        if (searchbarRef.current && !searchbarRef.current.contains(event.target)) {
            setActiveSearch(false);
            if (countryInput!==countryInputStored) {
              setCountryInput(countryInputStored)
            }
        }
    };

      document.addEventListener('click', handleClickOutside, true);
      return () => {
          document.removeEventListener('click', handleClickOutside, true);
      };
  });

  const selectCountry = (newCountry) => {
    setCountryInput(newCountry)
    setCountryInputStored(newCountry)
    setActiveSearch(false)

  }

  const countrySearch = () => {
    setActiveSearch("country")
    setCountryInput("")
  }




  const onChangeHandler = event => {
    const newInputValue = event.target.value
     setCountryInput(newInputValue);

  };

  const calcActiveCountryArray = () => {
    let activeCountries = []
    for (let i=0; i<fullCountryArray.length; i++) {
      const inputLowerCase = countryInput.toLowerCase()
      const countryNameFragment = fullCountryArray[i].substring(0, inputLowerCase.length).toLowerCase();
      if (inputLowerCase===countryNameFragment) {
        activeCountries.push(fullCountryArray[i])
      }
      if (activeCountries.length>4) {
        break;
      }
    }
    return activeCountries
  }

  const [activeCountryArray, setActiveCountryArray] = React.useState(calcActiveCountryArray());


  useEffect(() => {
    setActiveCountryArray(calcActiveCountryArray())
  }, [countryInput]);






  return (

    <div class="h1vnkd0i dir dir-ltr">
      <div class="c1yo0219 dir dir-ltr">
        <div>
          <div>


            <div class="c1kn6kxw dir dir-ltr">
              <header
                class="c1kffd0v cxy853f dir dir-ltr"
              >
                <div class="cdfwt5b cqul55 dir dir-ltr">
                <div>xxx</div>
                <div ref={searchbarRef}>
                <div class="_1bu35ic3">
                <div class="_13rvbe2">

                <div class="_dd55nf9">
                  <div class="_1rwlbyy">
                    <label
                      class={props.largeNav === "location" ? "_buo7ycz" : "_f6t7o5n"}
                      htmlFor="locationInput"
                      onClick={countrySearch}
                    >
                      <div class="_16fjzef">
                        <div class="_snpd7k">Country</div>
                        <input
                          class="_1yibeas"
                          id="locationInput"
                          placeholder="Search countries"
                          type="text"
                          name="name"
                          autocomplete="off"
                          onChange={onChangeHandler}
                          value={countryInput}
                        />
                      </div>
                    </label>




                      <div class="_18zylmz" onClick={(e) => e.stopPropagation()}>

                              <button
                                class="_q1ewc8l"
                                type="button"
                                onClick={props.handleSearchButton}
                              >
                                <div class="_186q534">
                                  <div>
                                    <svg
                                      viewBox="0 0 32 32"
                                      xmlns="http://www.w3.org/2000/svg"
                                      className="svg_search_lg"
                                      aria-hidden="true"
                                      role="presentation"
                                      focusable="false"
                                    >
                                      <g fill="none">
                                        <path d="m13 24c6.0751322 0 11-4.9248678 11-11 0-6.07513225-4.9248678-11-11-11-6.07513225 0-11 4.92486775-11 11 0 6.0751322 4.92486775 11 11 11zm8-3 9 9"></path>
                                      </g>
                                    </svg>
                                  </div>

                                </div>
                              </button>
                      </div>





{/* <div class={props.largeNav === "location" ? "_xhcgu32" : "_yu5dnq"}> */}
                {activeSearch ?    <div class="_xhcgu32">
                      <div
                        class="c1nifi44 l16t0m55 dir dir-ltr"
                        data-testid="structured-search-input-field-query-panel"
                      >
                        <section>
                          <div class=" dir dir-ltr">

      <div class="k3s7ijn dir dir-ltr" role="listbox" aria-label="Search suggestions" id="bigsearch-query-location-listbox" tabindex="-1">
        <div class="kyy9mvs dir dir-ltr">

{activeCountryArray.length > 0 ? activeCountryArray.map((x) => (
<div role="option" tabindex="-1" id="bigsearch-query-location-suggestion-0" data-index="0" data-testid="option-0" class="_uzocf2" onClick={() => selectCountry(x)}>
  <div class="_1825a1k">
    <div class="_r1t6ga">
      {x}
    </div>
    </div>
    </div>
  )) : <div role="option" tabindex="-1" id="bigsearch-query-location-suggestion-0" data-index="0" data-testid="option-0" class="_uzocf2">
    <div class="_1825a1k">
      <div class="_r1t6ga">
        no matches
      </div>
      </div>
      </div>}




        </div>
      </div>
                          </div>
                        </section>
                      </div>
                    </div> : null }

                  </div>
                </div>

                </div>
                </div>
                </div>
                <div>zzz</div>
                </div>
              </header>
            </div>
          </div>
        </div>
      </div>
    </div>


  )


}

export default SearchMapNav;


import React, { useState, useEffect, useRef } from "react";
import LargeMap from "./largeMap";
import SearchMapNav from "./searchMapNav";
import "../css/searchMap.css";

//

function SearchMap(props) {

  // boolean indicating if expanded map view is on
  const [expandMapView, setExpandMapView] = useState();

  const [searchListStyle, setSearchListStyle] = useState("fmdphkf dir dir-ltr");
  const [mapStyle, setMapStyle] = useState("m1ict9kd dir dir-ltr");

const toggleMapView = () => {
  console.log("toggleMap")
  if (expandMapView) {
    console.log("toggleMap - close map")
    setExpandMapView(false)
    if (window.innerWidth>=950) {

 setSearchListStyle("fmdphkf f1lf7snk dir dir-ltr")
setMapStyle("m1ict9kd m7lqfs3 dir dir-ltr")
setTimeout(() => {
 setSearchListStyle("fmdphkf dir dir-ltr")
  setMapStyle("m1ict9kd m12odydq dir dir-ltr")
  }, "850");
}

else {
  setSearchListStyle("fmdphkf dir dir-ltr")
   setMapStyle("m1ict9kd m12odydq dir dir-ltr")
}



  }
  else {
    console.log("toggleMap - open map")
    setExpandMapView(true)
  setSearchListStyle("fmdphkf fgnm67p f1lf7snk dir dir-ltr")
  setMapStyle("m1ict9kd m1k84ca2 dir dir-ltr")

}
}



  return (
<>
<SearchMapNav />
<main className="search-map-cy5">

  <div class="_1hytef3">
    <div class="_fo8j1u0">
      <button
        type="button"
        class="_174uh40 l1j9v1wn dir dir-ltr"
        onClick={toggleMapView}
      >
         {expandMapView ? <span class="_7u66d2">
          <span class="_r16tng">Show list</span>
          <div class="_hqsu3j">
            <svg
              viewBox="0 0 16 16"
              xmlns="http://www.w3.org/2000/svg"
              style={{
                display: "block",
                height: "16px",
                width: "16px",
                fill: "rgb(255, 255, 255)",
              }}
              aria-hidden="true"
              role="presentation"
              focusable="false"
            >
              <path fill-rule="evenodd" d="M2.5 11.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zM15 12v2H6v-2h9zM2.5 6.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zM15 7v2H6V7h9zM2.5 1.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zM15 2v2H6V2h9z"></path>
            </svg>
          </div>
        </span> :
        <span class="_7u66d2">
         <span class="_r16tng">Show map</span>
         <div class="_hqsu3j">
           <svg
             viewBox="0 0 32 32"
             xmlns="http://www.w3.org/2000/svg"
             style={{
               display: "block",
               height: "16px",
               width: "16px",
               fill: "rgb(255, 255, 255)",
             }}
             aria-hidden="true"
             role="presentation"
             focusable="false"
           >
             <path d="M31.245 3.747a2.285 2.285 0 0 0-1.01-1.44A2.286 2.286 0 0 0 28.501 2l-7.515 1.67-10-2L2.5 3.557A2.286 2.286 0 0 0 .7 5.802v21.95a2.284 2.284 0 0 0 1.065 1.941A2.29 2.29 0 0 0 3.498 30l7.515-1.67 10 2 8.484-1.886a2.285 2.285 0 0 0 1.802-2.245V4.247a2.3 2.3 0 0 0-.055-.5zM12.5 25.975l-1.514-.303L9.508 26H9.5V4.665l1.514-.336 1.486.297v21.349zm10 1.36l-1.515.337-1.485-.297V6.025l1.514.304L22.493 6h.007v21.335z"></path>
           </svg>
         </div>
       </span> }
      </button>
    </div>
  </div>

  <div className={searchListStyle}>list</div>
  <div className={mapStyle}>
<LargeMap expandMapView={expandMapView} toggleMapView={toggleMapView} />
  </div>
</main>
</>


  )


}

export default SearchMap;
